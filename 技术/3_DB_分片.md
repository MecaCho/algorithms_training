
# 分片   

将数据分配在不同的数据库上，使得每个数据库仅管理整个数据集的一个子集。
以用户数据库为例，随着用户数量的增加，越来越多的分片会被添加到集群中。

类似联合的优点，分片可以减少读取和写入流量，减少复制并提高缓存命中率。
也减少了索引，通常意味着查询更快，性能更好。
如果一个分片出问题，其他的仍能运行，你可以使用某种形式的冗余来防止数据丢失。
类似联合，没有只能串行写入的中心化主库，你可以并行写入，提高负载能力。

常见的做法是用户姓氏的首字母或者用户的地理位置来分隔用户表。

- 不利之处：分片    
你需要修改应用程序的逻辑来实现分片，这会带来复杂的 SQL 查询。    
分片不合理可能导致数据负载不均衡。例如，被频繁访问的用户数据会导致其所在分片的负载相对其他分片高。    
再平衡会引入额外的复杂度。基于一致性哈希的分片算法可以减少这种情况。    
联结多个分片的数据操作更复杂。    
分片需要更多的硬件和额外的复杂度。